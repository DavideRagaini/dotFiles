#!/bin/sh

delayed() {
        sleep 10
        LOCK_TIME=5 # Minutes
        NOTIFY=30 # Seconds
        xautolock -time $LOCK_TIME -notify $NOTIFY -notifier "notify-send -u critical -t ${NOTIFY}000 'System will be locked' '$NOTIFY seconds left'" -locker 'systemctl suspend' &
        unclutter-xfixes --jitter 10 --exclude-root --ignore-scrolling --fork &
        # redshift &
}

xrdb "${XDG_CONFIG_HOME:-$HOME/.config}/x11/xresources" & xrdbpid=$!

export BROWSER="qutebrowser"
export BROWSER2="librewolf"

case $(hostname) in
    VoiD)
        xrandr --output HDMI-0 --off --output DVI-D-0 --auto --scale 2
        # xrandr --output HDMI-0 --primary --auto --output DVI-D-0 --off
        export BROWSER="librewolf"
        export BROWSER2="qutebrowser"
        ;;
    vDR)
        xbacklight -set 20 &
        libinput-gestures-setup start &
        bluetooth off &
        ;;
    void)
        export BROWSER="librewolf"
        export BROWSER2="qutebrowser"
        libinput-gestures-setup start &
        ;;
    tinkerboard) delayed & ;;
esac

remaps &
conky -d &
setbg &
numlockx &
sysact Start &

[ -n "$xrdbpid" ] && wait "$xrdbpid"
xset dpms 0 0 180
